#!/usr/bin/env bash

set -o errexit
set -o pipefail
set -o nounset

if [[ $# -eq 0 ]]; then
    echo "missing arguments" >&2
    exit 1
fi

archive=$1

case ${archive##*.} in
    gz) target=${archive%.tar.gz} ;;
    tgz) target=${archive%.tgz} ;;
    tar) target=${archive%.tar} ;;
    *) echo "unsupported file extension: ${archive##*.}"; exit 1 ;;
esac

mkdir "$target"
echo "extracting to $target"
tar -xvf "$archive" -C "$target"
